var swaggerJson=null;var funcJsonToSchema=null;var funcSchemaToJson=null;var htmlElement=null;var endPointEditorIsOpen=false;var endPointPath=null;var endPointMethod=null;var HTML_ID_EDITOR_CANVAS="restApiEditorCanvas";var ID_INFO_TITLE="info_title";var ID_INFO_VERSION="info_version";var ID_INFO_DESCRIPTION="info_description";var ID_PROTOCOL="deployment_protocol";var ID_HOST="deployment_host";var ID_PORT="deployment_port";var ID_BASEPATH="deployment_basePath";var SWAGGER_SCHEMES=["http","https","ws","wss"];function getSwaggerJson(){return swaggerJson}function runEditor(c,b,a){swaggerJson=JSON.parse(c);funcJsonToSchema=b;funcSchemaToJson=a;document.write('  <p id="'+HTML_ID_EDITOR_CANVAS+'"></p>');htmlElement=document.getElementById(HTML_ID_EDITOR_CANVAS);updateHtml()}function updateHtml(){htmlElement.innerHTML=getHtml()}function getHtml(){var a="";a+=getHtmlSwaggerInfo();a+=getHtmlEndPointList();if(endPointEditorIsOpen){a+=getHtmlEndPoint()}a+=getHtmlSchemaList();return a}function getHtmlSwaggerInfo(){var a="";if(!swaggerJson.info){swaggerJson.info={}}a+=getHtmlWellStart("Service Info");a+=getHtmlInputWithLabel(ID_INFO_TITLE,"Title:",swaggerJson.info.title,"updateSwaggerData","Service title");a+=getHtmlInputWithLabel(ID_INFO_VERSION,"Version:",swaggerJson.info.version,"updateSwaggerData","Service version");a+=getHtmlTextArea(ID_INFO_DESCRIPTION,"Description:",swaggerJson.info.description,"updateSwaggerData");a+=getHtmlDeploymentInfo();a+=getHtmlWellEnd();return a}function getHtmlDeploymentInfo(){var d="";var b=getHostPortStrings();var a="REST Service Deployment Info:";var c="This information is for example used by the Swagger UI 'Try it out!' button";d+='<div class="row-fluid"><div class="control-group" '+getHtmlElementTitle(c)+'><label class="control-label" for="description">'+a+'</label><div class="controls">';d+='<table style="width:100%;">';d+="<tr>";d+='<th style="text-align:left;">Protocol</th>';d+='<th style="text-align:left;">Host</th>';d+='<th style="text-align:left;">Port (optional)</th>';d+='<th style="text-align:left;">Base path</th>';d+="</tr>";d+="<tr>";d+="<td>";d+=getHtmlMultiChoiceInput(ID_PROTOCOL,swaggerJson.schemes,"updateSwaggerData",SWAGGER_SCHEMES);d+="</td>";d+="<td>";d+=getHtmlTextInputLarge(ID_HOST,b[0],"updateSwaggerData");d+="</td>";d+="<td>";d+=getHtmlTextInputLarge(ID_PORT,b[1],"updateSwaggerData");d+="</td>";d+="<td>";d+=getHtmlTextInputLarge(ID_BASEPATH,swaggerJson.basePath,"updateSwaggerData");d+="</td>";d+="</tr>";d+="</table>";d+="</div></div></div>";return d}function getHtmlEndPointList(){var e="";e+=getHtmlWellStart("Endpoint List","Click the method button to edit the end-point");for(path in swaggerJson.paths){for(method in swaggerJson.paths[path]){var d=method.toUpperCase();var c="endpoint_button_"+d;var b=endPointEditorIsOpen&&path===endPointPath&&d===endPointMethod.toUpperCase();var a="startEditEndPoint('"+path+"','"+method+"')";e+=getSwaggerMethodButton(c,d,b,a);e+="&nbsp&nbsp"+path+"<p></p>"}}e+=getHtmlButtonAddItem("Add Endpoint","startEditEndPoint()",endPointEditorIsOpen);e+=getHtmlWellEnd();return e}function getHtmlEndPoint(){var a='<hr style="height:6px; background-color:black"><h3>End Point Editor&nbsp&nbsp'+getHtmlButtonPrimary("Save and Close","saveAndExitEndPointEditor()")+"&nbsp&nbsp"+getHtmlButtonDanger("Delete","deleteAndExitEndPointEditor()")+"</h3><div>"+getHtmlEndPointEditor()+"</div>";a+=getHtmlScrollTo();return a}function updateSwaggerData(b){var c=document.getElementById(b).value;if(b===ID_INFO_TITLE){swaggerJson.info.title=c}else{if(b===ID_INFO_VERSION){swaggerJson.info.version=c}else{if(b===ID_INFO_DESCRIPTION){swaggerJson.info.description=c}else{if(b===ID_BASEPATH){swaggerJson.basePath=c}else{if(b===ID_HOST){var a=getHostPortStrings();a[0]=c;getSwaggerHost(a)}else{if(b===ID_PORT){var a=getHostPortStrings();a[1]=c;getSwaggerHost(a)}else{if(b===ID_PROTOCOL){swaggerJson.schemes=c}}}}}}}}function startEditEndPoint(a,b){endPointPath=a;endPointMethod=b;if(a&&b){newEndPointPath=a;newEndPointMethod=b;newEndPointData=swaggerJson.paths[a][b]}else{newEndPointPath="/";newEndPointMethod="GET";newEndPointData={operationId:"",description:""}}endPointEditorIsOpen=true;updateHtml()}function saveAndExitEndPointEditor(){if(newEndPointPath!==endPointPath){if(!swaggerJson.paths){swaggerJson.paths={}}swaggerJson.paths[newEndPointPath]={};swaggerJson.paths[newEndPointPath][newEndPointMethod]=newEndPointData;if(endPointPath){delete swaggerJson.paths[endPointPath]}}else{if(newEndPointMethod!==endPointMethod){swaggerJson.paths[endPointPath][newEndPointMethod]=newEndPointData;delete swaggerJson.paths[endPointPath][endPointMethod]}else{swaggerJson.paths[endPointPath][endPointMethod]=newEndPointData}}endPointEditorIsOpen=false;updateHtml()}function deleteAndExitEndPointEditor(){if(endPointPath&&endPointMethod){delete swaggerJson.paths[endPointPath]}endPointEditorIsOpen=false;updateHtml()}function getHostPortStrings(){var a=["",""];if(swaggerJson.host){var b=swaggerJson.host.split(":");if(b.length===0){}else{if(b.length===1){a[0]=b[0]}else{if(b.length===2){a[0]=b[0];a[1]=b[1]}}}}return a}function getSwaggerHost(a){if(a[0]===""){if(swaggerJson.host){delete swaggerJson.host}}else{swaggerJson.host=a[0];if(a[1]!==""){swaggerJson.host+=":"+a[1]}}}function getHtmlWellStart(b,a){var c='<div class="page-header well"><h4 '+getHtmlElementTitle(a)+">"+b+"</h4>";return c}function getHtmlWellEnd(){htmlText="</div>";return htmlText}function getHtmlTextInput(a,c,b){if(!c){c=""}var d='<input class="span3" type="text" class="input-large" id="'+a+'" value="'+c+'" '+getHtmlElementOnChange(b,a)+">";return d}function getHtmlTextInputLarge(a,c,b){if(!c){c=""}var d="";d+=d+='<div class="row-fluid">';d+='<input class="span12" type="text" class="input-large" id="'+a+'" value="'+c+'" '+getHtmlElementOnChange(b,a)+">";d+="</div>";return d}function getHtmlInputWithLabel(a,b,d,c,e){if(!d){d=""}var f='<div class="row-fluid"><div class="control-group" '+getHtmlElementTitle(e)+'><label class="control-label" for="description">'+b+'</label><div class="controls"><input class="span12" type="text" class="input-large" id="'+a+'" value="'+d+'" '+getHtmlElementOnChange(c,a)+" required></div></div></div>";return f}function getHtmlMultiChoiceInput(a,d,c,b){if(!d){d=""}var f="";f+='<select id="'+a+'" '+getHtmlElementOnChange(c,a)+">";for(index in b){var e="";if(b[index]===d){e='selected="selected"'}f+="<option "+e+">"+b[index]+"</option>"}f+="</select>";return f}function getHtmlMultiChoiceInputWithLabel(a,c,e,d,b){if(!e){e=b[0]}var g='<div class="row-fluid"><div class="control-group"><label class="control-label" for="description">'+c+'</label><div class="controls"><select class="span3 controls" id="'+a+'" '+getHtmlElementOnChange(d,a)+">";for(index in b){var f="";if(b[index]===e){f='selected="selected"'}g+="<option "+f+">"+b[index]+"</option>"}g+="</select></div></div></div>";return g}function getHtmInputWithOptions(a,c,e,d,b){if(!e){e=b[0]}var f='<div class="row-fluid"><div class="control-group"><div class="controls"><input class="span3 controls" list="'+a+'" '+getHtmlElementOnChange(d,a)+'><datalist id="'+a+'">';for(index in b){f+="<option>"+b[index]+"</option>"}f+="</datalist></div></div></div>";return f}function getHtmlTextArea(a,b,d,c){if(!d){d=""}var e='<div class="row-fluid"><div class="control-group"><label class="control-label" for="'+a+'">'+b+'</label><div class="controls"><textarea class="span12" id="'+a+'" '+getHtmlElementOnChange(c,a)+">"+d+"</textarea></div></div></div>";return e}function getHtmlButtonPrimary(b,a){var c='<button type="button" class="btn btn-small btn-primary" style="display:inline" onClick="'+a+'">'+b+"</button>";return c}function getHtmlButtonDanger(b,a){var c='<button type="button" class="btn btn-small btn-danger" style="display:inline" onClick="'+a+'">'+b+"</button>";return c}function getHtmlButtonPlain(d,c,b){var a=b?"disabled":"";var e='<button type="button" class="btn btn-small" style="display:inline" onClick="'+c+'"'+a+">"+d+"</button>";return e}function getHtmlButtonAddItem(c,b,a){var d=getHtmlButtonPlain('<i class="icon-plus"></i>&nbsp&nbsp'+c,b,a);return d}function getHtmlButtonOpenSubEditor(c,a){var b="";b+="&nbsp&nbsp";b+='<button type="button" class="btn btn-default btn-info" onClick="'+c+"('"+a+'\')">Edit&nbsp&nbsp<span class="icon-chevron-down" aria-hidden="true"></span></button>';b+="<p></p>";return b}function getHtmlButtonsCloseSubEditor(c,b,a){var d="";d+="&nbsp&nbsp";d+='<button type="button" class="btn btn-default btn-success" onClick="'+c+"('"+a+'\')">Done&nbsp&nbsp<span class="icon-chevron-up" aria-hidden="true"></span></button>';d+="&nbsp&nbsp";if(b){d+='<button type="button" class="btn btn-default btn-danger" onClick="'+b+"('"+a+"')\">Delete</button>"}d+="<p></p>";return d}function getHtmlDeleteButton(b,a){var c="";c+="&nbsp&nbsp";c+='<button type="button" class="btn btn-default btn-danger" onClick="'+b+"('"+a+"')\">Delete</button>";return c}function getHtmlScrollTo(){var a="<script>window.scrollTo(0,0)<\/script>";return a}function getSwaggerMethodButton(d,c,b,f){var a=getSwaggerMethodButtonClassText(b);var e=getSwaggerMethodColor(c);var g='<button type="button" id="'+d+'" class="'+a+'" style="display:inline; width: 6em; color:'+e+'" onClick="'+f+'">'+c+"</button>";return g}function getSwaggerMethodButtonClassText(a){if(a){return"btn btn-small active"}return"btn btn-small"}function getSwaggerMethodColor(a){if(a==="GET"){return"blue"}else{if(a==="PUT"){return"brown"}else{if(a==="POST"){return"green"}else{if(a==="DELETE"){return"red"}}}}return"grey"}function getParamsList(b,d){var a=[];for(index in b.parameters){var c=b.parameters[index];var d=c["in"];if(d===d){a.push[c]}}return a}function getHtmlIdFromIndex(a,b){return a+"_"+b}function getParamIndexFromHtmlId(b){var a=b.lastIndexOf("_");return b.substring(a+1)}function getParamIndex(a,d,b){for(index in a.parameters){var c=a.parameters[index];if(c["in"]===d&&c.name===b){return index;break}}return -1}function getHtmlElementOnChange(b,a){var c=' onChange="'+b+'()"';if(a){c=' onChange="'+b+"('"+a+"')\""}return c}function getHtmlElementTitle(b){var a="";if(b){a='title="'+b+'"'}return a}var newEndPointPath=null;var newEndPointMethod=null;var newEndPointData=null;var ID_ENDPOINT_NAME="endpoint_name";var ID_ENDPOINT_DESCRIPTION="endpoint_description";var ID_ENDPOINT_PATH="endpoint_path";function getHtmlEndPointEditor(){var a="";a+=getHtmlEndPointMainInfo();a+=getHtmlMethod();a+=getHtmlPath();a+=getHtmlQueryParams();a+=getHtmlHeaderParams();a+=getHtmlRequestBody();a+=getHtmlResponses();return a}function getHtmlEndPointMainInfo(){var a="";a+='<div class="page-header well">';a+="<h4>General endpoint info</h4>";a+=getHtmlInputWithLabel(ID_ENDPOINT_NAME,"Name:",newEndPointData.operationId,"updateEndpointData('"+ID_ENDPOINT_NAME+"')");a+=getHtmlTextArea(ID_ENDPOINT_DESCRIPTION,"Description:",newEndPointData.description,"updateEndpointData('"+ID_ENDPOINT_DESCRIPTION+"')");a+="</div>";return a}function updateEndpointData(a){var b=document.getElementById(a).value;if(a===ID_ENDPOINT_NAME){newEndPointData.operationId=b}else{if(a===ID_ENDPOINT_DESCRIPTION){newEndPointData.description=b}else{if(a===ID_ENDPOINT_PATH){newEndPointPath=b}}}}var formParamBeingEdited=null;var PARAM_TYPE_FORM="formData";var HTML_ID_FORM_PARAM_NAME="form_param_name";var HTML_ID_FORM_PARAM_TYPE="form_param_type";var HTML_ID_FORM_PARAM_DESC="form_param_description";var FORM_PARAM_TYPE_OPTIONS=["string","integer","number","boolean","array","file"];function getHtmlFormParams(){var g="";g+="<p>Form parameters:</p>";if(newEndPointData.parameters){for(index in newEndPointData.parameters){var d=newEndPointData.parameters[index];var f=d["in"];if(f===PARAM_TYPE_FORM){var c=d.name;var a=getHtmlIdFromIndex(HTML_ID_FORM_PARAM_NAME,index);var b=getHtmlIdFromIndex(HTML_ID_FORM_PARAM_TYPE,index);var e=getHtmlIdFromIndex(HTML_ID_FORM_PARAM_DESC,index);g+=getHtmlTextInput(a,c,"updateFormParam");if(formParamBeingEdited!=null&&formParamBeingEdited===c){g+=getHtmlButtonsCloseSubEditor("closeFormParamEditor","deleteFormParam",c);g+=getHtmlMultiChoiceInputWithLabel(b,"Type:",d.type,"updateFormParam",FORM_PARAM_TYPE_OPTIONS);g+=getHtmlTextArea(e,"Description:",d.description,"updateFormParam")}else{g+=getHtmlButtonOpenSubEditor("openFormParamEditor",c)}}}}g+=getHtmlButtonAddItem("Add Form Parameter","addFormParam()",formParamBeingEdited!=null);return g}function addFormParam(){var a="";var b={"in":PARAM_TYPE_FORM,name:a,type:"string",description:""};if(!newEndPointData.parameters){newEndPointData.parameters=[]}newEndPointData.parameters.push(b);openFormParamEditor(a)}function deleteFormParam(b){var a=getParamIndex(newEndPointData,PARAM_TYPE_FORM,b);if(a!==-1){newEndPointData.parameters.splice(a,1)}closeFormParamEditor(b)}function updateFormParam(b){var c=document.getElementById(b).value;var a=getParamIndexFromHtmlId(b);if(a!==-1){var d=newEndPointData.parameters[a];if(b===getHtmlIdFromIndex(HTML_ID_FORM_PARAM_NAME,a)){d.name=c}else{if(b===getHtmlIdFromIndex(HTML_ID_FORM_PARAM_TYPE,a)){d.type=c}else{if(b===getHtmlIdFromIndex(HTML_ID_FORM_PARAM_DESC,a)){d.description=c}}}}}function openFormParamEditor(a){formParamBeingEdited=a;updateHtml()}function closeFormParamEditor(a){formParamBeingEdited=null;updateHtml()}var headerParamBeingEdited=null;var PARAM_TYPE_HEADER="header";var HTML_ID_HEADER_PARAM_NAME="header_param_name";var HTML_ID_HEADER_PARAM_TYPE="header_param_type";var HTML_ID_HEADER_PARAM_DESC="header_param_description";var HEADER_PARAM_TYPE_OPTIONS=["string","integer","number"];function getHtmlHeaderParams(){var g="";g+=getHtmlWellStart("Headers");if(newEndPointData.parameters){for(index in newEndPointData.parameters){var d=newEndPointData.parameters[index];var f=d["in"];if(f===PARAM_TYPE_HEADER){var c=d.name;var a=getHtmlIdFromIndex(HTML_ID_HEADER_PARAM_NAME,index);var b=getHtmlIdFromIndex(HTML_ID_HEADER_PARAM_TYPE,index);var e=getHtmlIdFromIndex(HTML_ID_HEADER_PARAM_DESC,index);g+=getHtmlTextInput(a,c,"updateHeaderParam");if(headerParamBeingEdited!=null&&headerParamBeingEdited===c){g+=getHtmlButtonsCloseSubEditor("closeHeaderParamEditor","deleteHeaderParam",c);g+=getHtmlMultiChoiceInputWithLabel(b,"Type:",d.type,"updateHeaderParam",HEADER_PARAM_TYPE_OPTIONS);g+=getHtmlTextArea(e,"Description:",d.description,"updateHeaderParam")}else{g+=getHtmlButtonOpenSubEditor("openHeaderParamEditor",c)}}}}g+=getHtmlButtonAddItem("Add Header","addHeaderParam()",headerParamBeingEdited!=null);g+=getHtmlWellEnd();return g}function addHeaderParam(){var a="";var b={"in":PARAM_TYPE_HEADER,name:a,type:"string",description:""};if(!newEndPointData.parameters){newEndPointData.parameters=[]}newEndPointData.parameters.push(b);openHeaderParamEditor(a)}function deleteHeaderParam(){var a=getParamIndex(newEndPointData,PARAM_TYPE_HEADER,headerParamBeingEdited);if(a!==-1){newEndPointData.parameters.splice(a,1)}closeHeaderParamEditor()}function updateHeaderParam(b){var c=document.getElementById(b).value;var a=getParamIndexFromHtmlId(b);if(a!==-1){var d=newEndPointData.parameters[a];if(b===getHtmlIdFromIndex(HTML_ID_HEADER_PARAM_NAME,a)){d.name=c}else{if(b===getHtmlIdFromIndex(HTML_ID_HEADER_PARAM_TYPE,a)){d.type=c}else{if(b===getHtmlIdFromIndex(HTML_ID_HEADER_PARAM_DESC,a)){d.description=c}}}}}function openHeaderParamEditor(a){headerParamBeingEdited=a;updateHtml()}function closeHeaderParamEditor(a){headerParamBeingEdited=null;updateHtml()}var SWAGGER_METHODS=["GET","POST","PUT","DELETE"];var ID_ENDPOINT_PATH="path";var ID_ENDPOINT_PATH_PARAM="path_param";function getHtmlMethod(){var a="";a+=getHtmlWellStart("Method");a+=getHtmlMethodButtons();a+=getHtmlWellEnd();return a}function getHtmlMethodButtons(){var h="";var g=getMethodsForPath(newEndPointPath);for(var c=0;c<SWAGGER_METHODS.length;c++){var f=SWAGGER_METHODS[c];var e="button_"+f;var d=newEndPointMethod.toUpperCase()===f;var a="endPointMethodButtonClicked('"+f+"')";var b=(!d)&&(g.indexOf(f)!==-1);h+=getSwaggerMethodButton(e,f,d,a);h+="&nbsp&nbsp"}return h}function endPointMethodButtonClicked(c){for(var a=0;a<SWAGGER_METHODS.length;a++){var b=document.getElementById("button_"+SWAGGER_METHODS[a]);b.className=getSwaggerMethodButtonClassText(SWAGGER_METHODS[a]===c)}newEndPointMethod=c.toLowerCase()}function getMethodsForPath(a){var b=[];for(path in swaggerJson.paths){if(path===a){for(method in swaggerJson.paths[path]){b.push[method.toUpperCase()]}}}return b}var pathParamBeingEdited=null;var ID_ENDPOINT_PATH="path";var ID_ENDPOINT_PATH_PARAM="path_param";function getHtmlPath(){var a="";a+=getHtmlWellStart("Path","Variable path parameters are enclosed in { }; adding a new one will automatically create a new editable section");a+=getHtmlTextInputLarge(ID_ENDPOINT_PATH,newEndPointPath,"updatePath");a+="<p/>";a+=getHtmlPathParams();a+=getHtmlWellEnd();return a}function getHtmlPathParams(){var f="";var b=extractPathParamsFromPath(newEndPointPath);var a=addDescriptionToPathParamArray(b);for(index in a){var e=a[index];var c=ID_ENDPOINT_PATH_PARAM+"_"+e.name;f+='<input class="span3" type="text" class="input-large" id="'+c+'" name="'+c+'" value="'+e.name+'" readonly>';if(pathParamBeingEdited!=null&&pathParamBeingEdited===e.name){f+=getHtmlButtonsCloseSubEditor("closePathParamEditor",null,e.name);var d=c+"_description";f+=getHtmlTextArea(d,"Description:",e.description,"updatePathParamDescription('"+d+"')")}else{f+=getHtmlButtonOpenSubEditor("openPathParamEditor",e.name)}}return f}function updatePathParamDescription(a){if(pathParamBeingEdited){var c=document.getElementById(a).value;for(var b in newEndPointData.parameters){var d=newEndPointData.parameters[b];var e=d["in"];if(e==="path"){for(b in pathParamNameArray){if(pathParamNameArray[b].name===pathParamBeingEdited){pathParamNameArray[b].description=c;break}}}}}}function addDescriptionToPathParamArray(c){var a=[];for(b in c){var d=c[b];var e={name:d,description:""};a.push(e)}for(var b in newEndPointData.parameters){var f=newEndPointData.parameters[b];var g=f["in"];if(g==="path"){for(b in c){if(c[b].name===f.name&&f.description){c[b].description=f.description;break}}}}return a}function updatePath(){var f=document.getElementById(ID_ENDPOINT_PATH).value;var g=checkPathValidity(f);if(g){alert(g);return}var c=extractPathParamsFromPath(newEndPointPath);var l=extractPathParamsFromPath(f);var e=getChangedArrayNames(c,l);if(typeof e==="string"){alert(e);return}if(e.length>0){for(var d=0;d<c.length;d++){if(c[d]!==l[d]){for(var h in newEndPointData.parameters){var b=newEndPointData.parameters[h];if(b["in"]==="path"&&b.name===c[d]){b.name===l[d]}}}}}else{for(var h in newEndPointData.parameters){var b=newEndPointData.parameters[h];if(b["in"]==="path"){var a=b.name;if(l.indexOf(a)===-1){newEndPointData.parameters.splice(h,1);h--}}}}for(var h=0;h<l.length;h++){var j=l[h];var m=true;for(var h in newEndPointData.parameters){var b=newEndPointData.parameters[h];if(b["in"]==="path"&&b.name===j){m=false;break}}if(m){var k={"in":"path",name:j};if(!newEndPointData.parameters){newEndPointData.parameters=[]}newEndPointData.parameters.push(k)}}newEndPointPath=f;updateHtml()}function getChangedArrayNames(h,d){if(h.length===d.length){return d}if(d.length>h.length){for(var b=0;b<h.length;b++){var f=h[b];var c=true;for(var e=0;e<d.length;e++){if(f===d[e]){c=false;break}}if(c){return"ERROR: path parameters were added, but an existing parameter name was no longer in the new list: "+f}}}else{for(var e=0;e<d.length;e++){var a=d[e];var g=true;for(var b=0;b<h.length;b++){if(a===h[b]){g=false;break}}if(g){return"ERROR: path parameters were removed, but a new parameter name was not in the old list: "+a}}}return[]}function checkPathValidity(f){if(f.length===0||f.charAt(0)!=="/"){return"Path must start with a '/'"}if(f.indexOf("//")!==-1){return"Path cannot have empty parts, i.e. the path cannot contain '//'"}if(!/^[A-Za-z0-9-._~{}/]+$/.test(f)){return"Invalid character(-s) found in path, valid characters are: A-Z a-z 0-9 - _ ~ { } /"}var e=[];var a=f.split("/");for(var b in a){var d=a[b];if(d.length>0){if(d.charAt(0)==="{"&&d.charAt(d.length-1)==="}"){d=d.substr(1,d.length-2);if(d.length===0){return"Cannot have an empty path parameter {}"}for(var c in e){if(d===e[c]){return"Cannot have duplicate path parameters: "+d}}e.push(d)}if(d.indexOf("{")!==-1||d.indexOf("}")!==-1){return"Characters { and } are reserved for denoting path parameters and can only encapsulate path parts"}}}return null}function extractPathParamsFromPath(e){var d=[];var a=e.split("/");for(var b in a){var c=a[b];if(c.charAt(0)==="{"&&c.charAt(c.length-1)==="}"){d.push(c.substr(1,c.length-2))}}return d}function openPathParamEditor(a){pathParamBeingEdited=a;updateHtml()}function closePathParamEditor(a){pathParamBeingEdited=null;updateHtml()}function addPathParameter(){}var queryParamBeingEdited=null;var PARAM_TYPE_QUERY="query";var HTML_ID_QUERY_PARAM_NAME="query_param_name";var HTML_ID_QUERY_PARAM_TYPE="query_param_type";var HTML_ID_QUERY_PARAM_DESC="query_param_description";var QUERY_PARAM_TYPE_OPTIONS=["string","integer","number","boolean"];function getHtmlQueryParams(){var g="";g+=getHtmlWellStart("URL Query Parameters");if(newEndPointData.parameters){for(index in newEndPointData.parameters){var d=newEndPointData.parameters[index];var f=d["in"];if(f===PARAM_TYPE_QUERY){var c=d.name;var a=getHtmlIdFromIndex(HTML_ID_QUERY_PARAM_NAME,index);var b=getHtmlIdFromIndex(HTML_ID_QUERY_PARAM_TYPE,index);var e=getHtmlIdFromIndex(HTML_ID_QUERY_PARAM_DESC,index);g+=getHtmlTextInput(a,c,"updateQueryParam");if(queryParamBeingEdited!=null&&queryParamBeingEdited===c){g+=getHtmlButtonsCloseSubEditor("closeQueryParamEditor","deleteQueryParam",c);g+=getHtmlMultiChoiceInputWithLabel(b,"Type:",d.type,"updateQueryParam",QUERY_PARAM_TYPE_OPTIONS);g+=getHtmlTextArea(e,"Description:",d.description,"updateQueryParam")}else{g+=getHtmlButtonOpenSubEditor("openQueryParamEditor",c)}}}}g+=getHtmlButtonAddItem("Add Query Parameter","addQueryParam()",queryParamBeingEdited!=null);g+=getHtmlWellEnd();return g}function addQueryParam(){var a="";var b={"in":PARAM_TYPE_QUERY,name:a,type:"string",description:""};if(!newEndPointData.parameters){newEndPointData.parameters=[]}newEndPointData.parameters.push(b);openQueryParamEditor(a)}function deleteQueryParam(b){var a=getParamIndex(newEndPointData,PARAM_TYPE_QUERY,b);if(a!==-1){newEndPointData.parameters.splice(a,1)}closeQueryParamEditor(b)}function updateQueryParam(b){var c=document.getElementById(b).value;var a=getParamIndexFromHtmlId(b);if(a!==-1){var d=newEndPointData.parameters[a];if(b===getHtmlIdFromIndex(HTML_ID_QUERY_PARAM_NAME,a)){d.name=c}else{if(b===getHtmlIdFromIndex(HTML_ID_QUERY_PARAM_TYPE,a)){d.type=c}else{if(b===getHtmlIdFromIndex(HTML_ID_QUERY_PARAM_DESC,a)){d.description=c}}}}}function openQueryParamEditor(a){queryParamBeingEdited=a;updateHtml()}function closeQueryParamEditor(a){queryParamBeingEdited=null;updateHtml()}var HTML_ID_CONSUMES="consumes";var HTML_ID_BODY_DESCRIPTION="req_body_description";var MIMETYPE_WWW_FORM_ENCODED="application/x-www-form-urlencoded";var MIMETYPE_MULTIPART_FORM_DATA="multipart/form-data";var MIMETYPE_JSON="application/json";var MIMETYPE_XML="application/xml";var MOST_COMMON_MIME_TYPES=[MIMETYPE_JSON,MIMETYPE_XML,MIMETYPE_WWW_FORM_ENCODED,MIMETYPE_MULTIPART_FORM_DATA,"application/octet-stream","text/html","text/plain"];var BODY_NOT_DEFINED=0;var BODY_HAS_FORM_PARAMS=1;var BODY_HAS_JSON_OR_XML_SCHEMA=2;var BODY_HAS_BYTE_ARRAY=3;var requestBodyType=BODY_NOT_DEFINED;function getHtmlRequestBody(){var c="";c+=getHtmlWellStart("Request Body");c+="<p>Accepted request mime-types:</p>";if(newEndPointData.consumes){for(index in newEndPointData.consumes){var b=newEndPointData.consumes[index];var a=HTML_ID_CONSUMES+"_"+index;c+=getHtmMimeType(a,"Type:",b,"updateConsumesMimeType","deleteConsumesMimeType",MOST_COMMON_MIME_TYPES);c+="<p></p>"}}c+=getHtmlButtonAddItem("Add mime-type","addConsumesMimeType()",false);requestBodyType=BODY_NOT_DEFINED;if(newEndPointData.consumes&&newEndPointData.consumes.length>0&&newEndPointData.consumes[0].length>0){requestBodyType=getBodyType(newEndPointData.consumes[0])}if(requestBodyType===BODY_HAS_FORM_PARAMS){c+="<hr>";c+=getHtmlFormParams()}else{if(requestBodyType===BODY_HAS_JSON_OR_XML_SCHEMA){c+=getHtmlJsonBodyParam()}}c+=getHtmlWellEnd();return c}function getHtmlJsonBodyParam(){var c="";var a=null;for(index in newEndPointData.parameters){var b=newEndPointData.parameters[index];if(b["in"]==="body"){a=b;break}}if(!a){a={name:"body","in":"body",description:"",required:true,schema:{}}}c+="<hr>";c+=getHtmlTextArea(HTML_ID_BODY_DESCRIPTION,"Description:",a.description,"updateBody");c+=getHtmlSchema(a.schema);return c}function getHtmMimeType(a,c,f,e,d,b){var g="request_mime_type_list_id";var h='<div class="row-fluid"><div class="control-group"><div class="controls"><input class="span3 controls" id="'+a+'" list="'+g+'" value="'+f+'" onChange="'+e+"('"+a+'\')"><datalist id="'+g+'">';for(index in b){h+="<option>"+b[index]+"</option>"}h+='</datalist>&nbsp&nbsp<button type="button" class="btn btn-default btn-danger" onClick="'+d+"('"+a+"')\">Delete</button></div></div></div>";return h}function getHtmlSchema(a){htmlText="<p>Schema:</p>";return htmlText}function getBodyType(a){if(a===MIMETYPE_MULTIPART_FORM_DATA||a===MIMETYPE_WWW_FORM_ENCODED){return BODY_HAS_FORM_PARAMS}else{if(a===MIMETYPE_JSON||a===MIMETYPE_XML){return BODY_HAS_JSON_OR_XML_SCHEMA}}return BODY_HAS_BYTE_ARRAY}function updateConsumesMimeType(b){var c=getMimTypeIndex(b);var a=document.getElementById(b).value;var d=getBodyType(a);if(requestBodyType!==BODY_NOT_DEFINED&&requestBodyType!==d){alert("New mime-type not compatible with existing type: "+newEndPointData.consumes[0]);return}newEndPointData.consumes[c]=a;updateHtml()}function addConsumesMimeType(){var a="";if(!newEndPointData.consumes){newEndPointData.consumes=[]}newEndPointData.consumes.push(a);updateHtml()}function deleteConsumesMimeType(a){var b=getMimTypeIndex(a);if(b!==-1){newEndPointData.consumes.splice(b,1);updateHtml()}}function updateBody(){}function getMimTypeIndex(b){var a=b.substr(HTML_ID_CONSUMES.length+1);return parseInt(a)}var responseBeingEdited=null;var HTML_ID_RESPONSE_NAME="response_name";var HTML_ID_RESPONSE_DESCRIPTION="response_description";var EMPTY_RESPONSE_NAME="";var NON_EMPTY_RESPONSE_NAME="temp";function getHtmlResponses(){var b="";b+=getHtmlWellStart("Responses");for(responseName in newEndPointData.responses){var a=newEndPointData.responses[responseName];b+=getHtmlTextInput(HTML_ID_RESPONSE_NAME,responseName,"updateResponse");if(responseBeingEdited!=null&&responseBeingEdited===responseName){b+=getHtmlButtonsCloseSubEditor("closeResponseEditor","deleteResponse",responseName);b+=getHtmlTextArea(HTML_ID_RESPONSE_DESCRIPTION,"Description:",a.description,"updateResponse('"+HTML_ID_RESPONSE_DESCRIPTION+"')");b+=getHtmlResponseSchema(a)}else{b+=getHtmlButtonOpenSubEditor("openResponseEditor",responseName)}}b+=getHtmlButtonAddItem("Add Response","addResponse()",responseBeingEdited!=null);b+=getHtmlWellEnd();return b}function getHtmlResponseSchema(a){var b="";if(a.schema){b+="Schema:";b+=getHtmlSchemaEditor(a.schema)}else{b+=getHtmlButtonPlain("Create Schema","createResponseSchema()",false);b+="<p/><br/>"}return b}function addResponse(){var a=EMPTY_RESPONSE_NAME;var b={description:""};if(!newEndPointData.responses){newEndPointData.responses={}}newEndPointData.responses[a]=b;openResponseEditor(a)}function deleteResponse(a){delete newEndPointData.responses[a];closeResponseEditor(NON_EMPTY_RESPONSE_NAME)}function updateResponse(b){var c=document.getElementById(b).value;if(b===HTML_ID_RESPONSE_NAME){var a=newEndPointData.responses[responseBeingEdited];delete newEndPointData.responses[responseBeingEdited];responseBeingEdited=c;newEndPointData.responses[responseBeingEdited]=a}else{if(b===HTML_ID_RESPONSE_DESCRIPTION){newEndPointData.responses[responseBeingEdited].description=c}}}function openResponseEditor(a){responseBeingEdited=a;updateHtml()}function closeResponseEditor(a){if(a===EMPTY_RESPONSE_NAME){alert("Please enter a response code");return}var b=getSwaggerSchema();if(b!=null){newEndPointData.responses[responseBeingEdited].schema=b}responseBeingEdited=null;updateHtml()}function createResponseSchema(){newEndPointData.responses[responseBeingEdited].schema={};updateHtml()}var schemaBeingEdited=null;var schemaExampleBeingEdited=null;var HTML_ID_TEXTAREA_JSON="textarea_json";var HTML_ID_TEXTAREA_SCHEMA="textarea_schema";function htmlJsonToSchema(){if(funcJsonToSchema){var a=document.getElementById(HTML_ID_TEXTAREA_JSON);var b=a.value;funcJsonToSchema(b,htmlJsonToSchemaCallback)}}function htmlJsonToSchemaCallback(a,b){if(a){alert("JSON to Schema error: "+a)}else{var c=document.getElementById(HTML_ID_TEXTAREA_SCHEMA);c.value=JSON.stringify(JSON.parse(b),null,2);schemaBeingEdited=JSON.parse(b)}}function getHtmlSchemaEditor(b){splitSwaggerSchema(b);schemaText=JSON.stringify(schemaBeingEdited,null,2);var a="";if(schemaExampleBeingEdited){a=JSON.stringify(schemaExampleBeingEdited,null,2)}htmlText="";htmlText+='<table style="width:100%;"><tr><th style="width:45%">Schema</th><th style="width:10%"></th><th style="width:45%">JSON</th></tr><tr><td style="width:45%;text-align:center;"><textarea style="width:90%;height:24em;" id="'+HTML_ID_TEXTAREA_SCHEMA+'" onChange="onChangeSchemaEditorSchema()">'+schemaText+'</textarea></td><td style="width:10%;text-align:center;"><button type="button" class="btn btn-default btn-danger" onClick="htmlJsonToSchema()"><span class="icon-chevron-left" aria-hidden="true"></span></button></td><td style="width:45%;text-align:center;"><textarea style="width:90%;height:24em;" id="'+HTML_ID_TEXTAREA_JSON+'" onChange="onChangeSchemaEditorJson()">'+a+"</textarea></td></tr></table>";return htmlText}function splitSwaggerSchema(a){schemaBeingEdited=a;schemaExampleBeingEdited=a.example;if(schemaBeingEdited.example){delete schemaBeingEdited.example}}function getSwaggerSchema(){var a=schemaBeingEdited;if(schemaExampleBeingEdited){a.example=schemaExampleBeingEdited}return a}function onChangeSchemaEditorSchema(){var b=document.getElementById(HTML_ID_TEXTAREA_SCHEMA);var a=b.value;schemaBeingEdited=JSON.parse(a)}function onChangeSchemaEditorJson(){var a=document.getElementById(HTML_ID_TEXTAREA_JSON);var b=a.value;schemaExampleBeingEdited=JSON.parse(b)}var schemaNameBeingEdited=null;var HTML_ID_SCHEMA_NAME="schema_name";var NEW_SCHEMA_TEMP_NAME="";function getHtmlSchemaList(){var b="";b+=getHtmlWellStart("Schema List");if(swaggerJson.definitions){for(var a in swaggerJson.definitions){b+=getHtmlTextInput(HTML_ID_SCHEMA_NAME,a,"updateSchemaName");if(schemaNameBeingEdited!=null&&schemaNameBeingEdited===a){b+=getHtmlButtonsCloseSubEditor("closeSchemaEditor","deleteSchema",a);b+=getHtmlSchemaEditor(swaggerJson.definitions[a])}else{b+=getHtmlButtonOpenSubEditor("openSchemaEditor",a)}}}b+=getHtmlButtonAddItem("Add Schema","addSchema()",schemaNameBeingEdited!=null);b+=getHtmlWellEnd();return b}function addSchema(){if(!swaggerJson.definitions){swaggerJson.definitions={}}swaggerJson.definitions[NEW_SCHEMA_TEMP_NAME]={};openSchemaEditor(NEW_SCHEMA_TEMP_NAME)}function deleteSchema(a){if(swaggerJson.definitions[a]){delete swaggerJson.definitions[a]}closeSchemaEditor(a)}function updateSchemaName(a){if(a===HTML_ID_SCHEMA_NAME){var b=document.getElementById(a).value;if(b&&b.length!==0){swaggerJson.definitions[b]=swaggerJson.definitions[schemaNameBeingEdited];delete swaggerJson.definitions[schemaNameBeingEdited]}}}function openSchemaEditor(a){schemaNameBeingEdited=a;updateHtml()}function closeSchemaEditor(a){schemaNameBeingEdited=null;updateHtml()};